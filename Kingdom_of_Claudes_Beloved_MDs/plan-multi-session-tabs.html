<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Claude Code Mirror - Multi-Session Tabs Plan</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', 'Arial', sans-serif;
      background: #f5f7fa;
      color: #1a1a2e;
      padding: 40px 20px;
      line-height: 1.7;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 20px rgba(0,0,0,0.08);
      padding: 40px;
    }
    h1 {
      font-size: 28px;
      color: #16213e;
      margin-bottom: 8px;
      border-bottom: 3px solid #0f3460;
      padding-bottom: 12px;
    }
    .subtitle {
      font-size: 15px;
      color: #666;
      margin-bottom: 32px;
    }
    h2 {
      font-size: 20px;
      color: #0f3460;
      margin-top: 28px;
      margin-bottom: 12px;
    }
    p { margin-bottom: 14px; font-size: 15px; }
    .highlight-box {
      background: #e8f4fd;
      border-right: 4px solid #0f3460;
      padding: 16px 20px;
      border-radius: 0 8px 8px 0;
      margin: 20px 0;
    }
    .highlight-box strong { color: #0f3460; }
    .step-list {
      list-style: none;
      counter-reset: steps;
      margin: 16px 0;
    }
    .step-list li {
      counter-increment: steps;
      padding: 12px 16px 12px 0;
      border-bottom: 1px solid #eee;
      font-size: 15px;
    }
    .step-list li:last-child { border-bottom: none; }
    .step-list li::before {
      content: counter(steps);
      display: inline-block;
      width: 28px;
      height: 28px;
      background: #0f3460;
      color: #fff;
      border-radius: 50%;
      text-align: center;
      line-height: 28px;
      font-size: 13px;
      font-weight: bold;
      margin-left: 12px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0;
      font-size: 14px;
    }
    th {
      background: #0f3460;
      color: #fff;
      padding: 10px 14px;
      text-align: right;
    }
    td {
      padding: 10px 14px;
      border-bottom: 1px solid #eee;
    }
    tr:nth-child(even) { background: #f8f9fc; }
    .impact-badge {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: bold;
    }
    .impact-none { background: #e8f5e9; color: #2e7d32; }
    .impact-small { background: #fff3e0; color: #e65100; }
    .impact-new { background: #e3f2fd; color: #1565c0; }
    .summary-box {
      background: #f0f7e8;
      border: 1px solid #c5e1a5;
      border-radius: 8px;
      padding: 20px;
      margin-top: 24px;
    }
    .summary-box h3 {
      color: #33691e;
      margin-bottom: 8px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>תוכנית: סשנים מקבילים בטאבים</h1>
    <div class="subtitle">Claude Code Mirror - תוספת יכולת ריבוי סשנים</div>

    <h2>מה הבעיה?</h2>
    <p>
      כרגע התוסף תומך רק בסשן אחד בכל רגע נתון. אם המשתמש רוצה לעבוד עם כמה שיחות
      במקביל (למשל, שיחה אחת על באג ושנייה על פיצ'ר חדש), הוא צריך לסגור את הסשן הנוכחי
      ולפתוח חדש - מה שמאבד את כל ההיסטוריה של השיחה הקודמת.
    </p>

    <h2>מה הפתרון?</h2>
    <p>
      לאפשר פתיחת כמה סשנים במקביל, כל אחד בטאב נפרד של VS Code. כל טאב יריץ תהליך
      Claude עצמאי עם שיחה נפרדת. המשתמש יוכל לעבור בין הטאבים בדיוק כמו שהוא עובר
      בין קבצים ב-VS Code.
    </p>

    <div class="highlight-box">
      <strong>נקודה חשובה:</strong> הצד של ממשק המשתמש (React) לא צריך שינויים בכלל.
      כל טאב ב-VS Code מקבל אוטומטית את ממשק ה-React שלו באופן עצמאי.
      כל השינויים הם בצד של "מנוע" התוסף בלבד.
    </p>
    </div>

    <h2>שלבי ביצוע</h2>
    <ol class="step-list">
      <li>הגדרת ממשק תקשורת גמיש שמאפשר חיבור כל טאב לתהליך Claude משלו</li>
      <li>חילוץ בניית ממשק הצ'אט כפונקציה שניתן לקרוא לה מכל טאב</li>
      <li>יצירת רכיב "טאב סשן" שמאגד תהליך Claude + ממשק צ'אט + חיווט אירועים</li>
      <li>יצירת "מנהל טאבים" שעוקב אחרי כל הטאבים הפתוחים ויודע מי הטאב הפעיל</li>
      <li>עדכון הפקודות (התחל סשן, עצור, שלח הודעה) לעבוד עם הטאב הפעיל</li>
      <li>פישוט הקובץ הראשי - במקום הרבה רכיבים בודדים, מנהל טאבים אחד</li>
    </ol>

    <h2>השפעה על קבצים</h2>
    <table>
      <thead>
        <tr>
          <th>קובץ</th>
          <th>פעולה</th>
          <th>השפעה</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>SessionTab.ts</td>
          <td>חדש - רכיב טאב סשן</td>
          <td><span class="impact-badge impact-new">חדש</span></td>
        </tr>
        <tr>
          <td>TabManager.ts</td>
          <td>חדש - מנהל טאבים</td>
          <td><span class="impact-badge impact-new">חדש</span></td>
        </tr>
        <tr>
          <td>extension.ts</td>
          <td>פישוט - מ-195 שורות ל-50</td>
          <td><span class="impact-badge impact-small">שינוי</span></td>
        </tr>
        <tr>
          <td>commands.ts</td>
          <td>ניתוב פקודות דרך מנהל הטאבים</td>
          <td><span class="impact-badge impact-small">שינוי</span></td>
        </tr>
        <tr>
          <td>MessageHandler.ts</td>
          <td>שינוי קטן בסוג הקלט</td>
          <td><span class="impact-badge impact-small">שינוי</span></td>
        </tr>
        <tr>
          <td>WebviewProvider.ts</td>
          <td>חילוץ פונקציה</td>
          <td><span class="impact-badge impact-small">שינוי</span></td>
        </tr>
        <tr>
          <td>כל קוד ה-React</td>
          <td>ללא שינוי</td>
          <td><span class="impact-badge impact-none">ללא</span></td>
        </tr>
        <tr>
          <td>תהליך CLI</td>
          <td>ללא שינוי</td>
          <td><span class="impact-badge impact-none">ללא</span></td>
        </tr>
      </tbody>
    </table>

    <h2>התנהגות לאחר השינוי</h2>
    <table>
      <thead>
        <tr>
          <th>פעולה</th>
          <th>לפני</th>
          <th>אחרי</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Ctrl+Shift+C</td>
          <td>פותח סשן אחד (או חוזר לקיים)</td>
          <td>פותח טאב חדש עם סשן חדש</td>
        </tr>
        <tr>
          <td>עצירת סשן</td>
          <td>עוצר את הסשן היחיד</td>
          <td>עוצר את הסשן בטאב הפעיל</td>
        </tr>
        <tr>
          <td>שליחת הודעה</td>
          <td>שולח לסשן היחיד</td>
          <td>שולח לטאב שנמצא בפוקוס</td>
        </tr>
        <tr>
          <td>סגירת טאב</td>
          <td>סוגר את הכל</td>
          <td>סוגר רק את אותו סשן, השאר ממשיכים</td>
        </tr>
      </tbody>
    </table>

    <div class="summary-box">
      <h3>סיכום</h3>
      <p>
        השינוי מוסיף תמיכה בריבוי סשנים מקבילים ע"י יצירת שני רכיבים חדשים ועדכון
        ארבעה קבצים קיימים. הצד של ממשק המשתמש נשאר ללא שינוי.
        הפתרון משתמש ביכולות מובנות של VS Code (טאבים של webview panels),
        כך שהחוויה טבעית ומוכרת למשתמש.
      </p>
    </div>
  </div>
</body>
</html>
