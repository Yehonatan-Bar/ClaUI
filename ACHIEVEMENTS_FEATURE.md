# ClaUi Achievements Feature - Full Description

## מה המשתמש רואה בממשק

1. כפתור גביע בשורת הסטטוס:
`Trophy + מספר ההישגים הכולל`.

2. לחיצה על כפתור הגביע פותחת פאנל Achievements שבו מוצגים:
- רמה נוכחית (Level)
- סך XP נוכחי
- מספר הישגים שנפתחו
- מטרות סשן עם התקדמות `current/target`
- כפתור `Turn Off Achievements` לכיבוי מלא

3. בזמן עבודה, כאשר הישג נפתח:
- מופיע Toast קטן בצד ימין למעלה
- מוצגים שם ההישג, תיאור קצר ו-`+XP`
- צבע ה-Toast משתנה לפי נדירות (Common/Rare/Epic/Legendary)
- ניתן לסגור ידנית, ובנוסף הוא נסגר אוטומטית אחרי כמה שניות

4. בסוף סשן:
- מוצג כרטיס `Session Recap`
- כולל זמן פעילות Claude, משך סשן כולל, באגים שתוקנו, בדיקות שעברו, הישגים חדשים ו-XP שהושג

5. כיבוי מלא של הפיצ'ר:
- כאשר מכבים את הפיצ'ר, הגביע, הפאנל, ה-Toasts וכרטיס ה-Recap נעלמים לחלוטין
- המנוע מפסיק לעקוב/לחשב/לשדר הישגים

## שעון זמן סשן (Activity Clock)

### מיקום

- בשורת הסטטוס מוצג שעון: `Active: HH:MM:SS`

### התנהגות

1. השעון לא מתחיל מיד עם פתיחת סשן.
2. השעון מתחיל רק אחרי שליחת הפרומפט הראשון של המשתמש.
3. השעון סופר רק זמן פעילות אמיתי של Claude:
- מתחיל כש-Claude נכנס למצב `busy`
- נעצר כש-Claude מסיים פעילות וחוזר ל-`idle`
4. אם המשתמש שולח פרומפט נוסף:
- השעון ממשיך מאותה נקודה (זמן מצטבר)
- לא מתאפס
5. כך מתקבל תמיד זמן פעילות אמיתי ומעודכן של הסשן בפועל, ולא רק זמן קיר (wall clock).

### אינדיקציה ויזואלית

- כשה-Claude פעיל, השעון מסומן כ-`running` ומודגש בצבע ירוק.
- כשה-Claude לא פעיל, השעון נשאר יציב על הערך המצטבר האחרון.

## לוגיקת הישגים (High-level)

המנוע עוקב אחרי אירועים בזמן אמת:
- שליחת פרומפטים
- התחלה/סיום פעילות Claude
- תוצאות הצלחה/שגיאה
- שימוש בכלים (tool use)
- סימני בדיקות/תיקון באגים/רצפים

על בסיס האירועים מחושבים:
- פתיחת הישגים
- עדכון XP ורמות
- עדכון מטרות סשן
- נתוני Recap בסיום

## Persistence (שמירה)

- פרופיל הישגים נשמר ב-`globalState`:
- XP כולל
- רמה
- הישגים שנפתחו
- מונים מצטברים

המשמעות:
- ההתקדמות נשמרת גם אחרי סגירת חלון או פתיחה מחדש.

## הגדרות וקונפיגורציה

הפיצ'ר נשלט דרך הגדרות:

- `claudeMirror.achievements.enabled`
מפעיל/מכבה את מערכת ההישגים כולה.

- `claudeMirror.achievements.sound`
מפעיל/מכבה צליל קצר בעת Toast של הישג.

## סיכום

הפיצ'ר מספק חוויית Gamification מלאה:
- הישגים
- XP/Levels
- מטרות סשן
- Toasts
- Recap
- שעון פעילות אמיתי של Claude

עם אפשרות כיבוי מלאה למשתמשים שלא רוצים את החוויה הזו.
